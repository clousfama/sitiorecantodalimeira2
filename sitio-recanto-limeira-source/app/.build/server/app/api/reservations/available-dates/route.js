"use strict";(()=>{var e={};e.id=806,e.ids=[806],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},38694:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>D,staticGenerationAsyncStorage:()=>v});var r={};a.r(r),a.d(r,{GET:()=>p,dynamic:()=>l});var s=a(49303),n=a(88716),i=a(60670),o=a(87070);let u=new(a(53524)).PrismaClient,l="force-dynamic";async function p(){try{let e=new Date,t=new Date(e.getFullYear()+1,e.getMonth(),e.getDate()),a=await u.reservation.findMany({where:{status:{in:["CONFIRMED","PENDING"]},checkOut:{gte:e}},select:{checkIn:!0,checkOut:!0}}),r=await u.blockedDate.findMany({where:{OR:[{date:{gte:e,lte:t}},{startDate:{lte:t},endDate:{gte:e}}]},select:{date:!0,startDate:!0,endDate:!0}}),s=[];return a.forEach(e=>{let t=new Date(e.checkIn),a=new Date(e.checkOut);for(;t<a;)s.push(t.toISOString().split("T")[0]),t.setDate(t.getDate()+1)}),r.forEach(e=>{let t=e.date||e.startDate;if(t&&s.push(t.toISOString().split("T")[0]),e.startDate&&e.endDate){let t=new Date(e.startDate),a=new Date(e.endDate);for(;t<=a;)s.push(t.toISOString().split("T")[0]),t.setDate(t.getDate()+1)}}),o.NextResponse.json({unavailableDates:[...new Set(s)]})}catch(e){return console.error("Erro ao buscar datas dispon\xedveis:",e),o.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/reservations/available-dates/route",pathname:"/api/reservations/available-dates",filename:"route",bundlePath:"app/api/reservations/available-dates/route"},resolvedPagePath:"/home/ubuntu/vercel-deploy/sitio-recanto-limeira-source/app/app/api/reservations/available-dates/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:v,serverHooks:D}=d,h="/api/reservations/available-dates/route";function g(){return(0,i.patchFetch)({serverHooks:D,staticGenerationAsyncStorage:v})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(38694));module.exports=r})();