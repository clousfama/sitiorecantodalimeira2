"use strict";(()=>{var e={};e.id=386,e.ids=[386],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},51699:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>j,requestAsyncStorage:()=>v,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var o={};r.r(o),r.d(o,{GET:()=>l,POST:()=>p,dynamic:()=>d});var a=r(49303),s=r(88716),n=r(60670),i=r(87070),c=r(53524);let u=globalThis.prisma??new c.PrismaClient,d="force-dynamic";async function p(e){try{let{name:t,email:r,phone:o,subject:a,message:s}=await e.json();if(!t||!r||!a||!s)return i.NextResponse.json({error:"Todos os campos obrigat\xf3rios devem ser preenchidos"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return i.NextResponse.json({error:"Formato de e-mail inv\xe1lido"},{status:400});let n=await u.contact.create({data:{name:t,email:r,phone:o||null,subject:a,message:s}});return i.NextResponse.json({message:"Mensagem enviada com sucesso",contact:{id:n.id,createdAt:n.createdAt}},{status:201})}catch(e){return console.error("Erro ao enviar mensagem de contato:",e),i.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}async function l(){try{let e=await u.contact.findMany({select:{id:!0,name:!0,email:!0,phone:!0,subject:!0,message:!0,createdAt:!0},orderBy:{createdAt:"desc"}});return i.NextResponse.json({contacts:e})}catch(e){return console.error("Erro ao buscar mensagens de contato:",e),i.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/contact/route",pathname:"/api/contact",filename:"route",bundlePath:"app/api/contact/route"},resolvedPagePath:"/home/ubuntu/vercel-deploy/sitio-recanto-limeira-source/app/app/api/contact/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:v,staticGenerationAsyncStorage:x,serverHooks:h}=m,g="/api/contact/route";function j(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972],()=>r(51699));module.exports=o})();